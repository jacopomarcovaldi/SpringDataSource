angular.module("dpCommonApp",["ngMaterial"]);var dpModalLoginId="dpModalLogin";if(!String.prototype.startsWith){String.prototype.startsWith=function(b,a){a=a||0;return this.indexOf(b,a)===a}}angular.module("dpCommonApp").service("i18n",[function(){var a=this;this.get=function(b){return a[b]?a[b]:b}}]);angular.module("dpCommonApp").component("dpModalMessage",{template:' <div id="dpModalMessage" class="modal"  tabindex="-1" role="dialog" aria-labelledby="dpModalMessage">  <div class="modal-dialog modal-sm" role="document">    <div class="modal-content text-left">      <div class="modal-header">        <a ng-click="service.cancel()" class="close" aria-label="Close" data-dismissa="modal"><span aria-hidden="true">&times;</span></a>        <h4 class="modal-title" ng-bind-html="service.message.title"></h4>      </div>      <div class="modal-body" ng-bind-html="service.message.text">      </div>     <div class="modal-footer">        <a ng-click="service.ok()" class="btn btn-default" role="button"        ng-bind-html="service.message.buttonOkLabel"></a>        <a ng-click="service.cancel()" class="btn btn-default" role="button"        ng-if="service.message.buttonCancelLabel"        ng-bind-html="service.message.buttonCancelLabel"></a>      </div>    </div><!-- /.modal-content -->  </div></div>',controller:["$scope","modalMessageService",function(a,b){a.service=b}]});angular.module("dpCommonApp").service("modalMessageService",["i18n",function(b){var a=this;a.initEvent=false;this.init=function(){a.message={buttonOkLabel:"common.button.close",text:"text",title:"title"}};this.init();this.open=function(c){if(!a.initEvent){$("#dpModalMessage").on("hidden.bs.modal",function(){if(a.message.buttonCancelCallback){a.message.buttonCancelCallback()}});a.initEvent=true}a.init();for(x in c){a.message[x]=c[x]}for(x in a.message){a.message[x]=b.get(a.message[x])}$("#dpModalMessage").modal("show")};this.ok=function(){$("#dpModalMessage").modal("hide");if(a.message.buttonOkCallback){a.message.buttonOkCallback()}};this.cancel=function(){$("#dpModalMessage").modal("hide");if(a.message.buttonCancelCallback){a.message.buttonCancelCallback()}}}]);angular.module("dpCommonApp").component("nbsp",{template:'<div class="row"><div class="col-lg-12" style="height:{{height}};background-color:red blink">&nbsp;</div> </div>',bindings:{height:"@"},controller:["$scope",function(a){a.height=this.height?this.height:"20px"}]});angular.module("dpCommonApp").component("pagination",{template:'<!-- Pagination (INFOGROUP: Se necessaria scommentare) -->			<div class="row text-center" ng-if="scope.result.pagination.pageCount > 1">		            <div class="col-lg-12">		                <ul class="pagination">		                    <li ng-if="scope.result.pagination.hasPrevious">		                        <a ng-href=""  ng-click="scope.previousPage(param)" title="{{i18n[\'pagination.previouspage\']}}">&laquo;</a>		                    </li>		                    <li ng-repeat="page in scope.result.pagination.pages as page" class="{{::page.current}}" >		                        <a ng-href=""  ng-click="scope.gotoPage(page.pageNumber,param)" title="{{i18n[\'pagination.gotopage\']}} {{::page.pageNumber}}">{{::page.pageNumber}}</a>		                    </li>		                    <li ng-if="scope.result.pagination.hasNext">		                        <a ng-href=""  ng-click="scope.nextPage(param)" title="{{i18n[\'pagination.nextpage\']}}">&raquo;</a>		                    </li>		                </ul>		            </div>		        </div>		<!-- <hr> --> ',controller:["$scope","controllerService",function(b,a){a.init(b);b.scope=this.scope;b.param=this.param}],bindings:{scope:"=",param:"@"}});angular.module("dpCommonApp").service("paginationService",["$location",function(a){this.init=function(c){function b(){c.result={entities:{},pagination:{page:1,size:10,rowCount:0,pageCount:0}}}b();function d(f,e){var g=a.search();if(e){g[e]=f}else{g.page=f}g.skipScroll=true;a.path(a.path()).search(g)}c.nextPage=function(e){d(c.result.pagination.page+1,e)};c.previousPage=function(e){d(c.result.pagination.page-1,e)};c.gotoPage=function(e,f){d(e,f)}}}]);angular.module("dpCommonApp").factory("pagedRequestInterceptor",["logService",function(a){return{response:function(c){if(c&&c.config&&c.config.url.startsWith("rest")){if(c.data&&c.data.pagination){a.debug("configuring pagination for response call "+c.config.url);var b=c.data.pagination;b.pages=[];var d=Math.ceil(b.rowCount/b.size);b.pageCount=d;b.hasNext=b.page<b.pageCount;b.hasPrevious=b.page>1;for(var e=1;e<=d;e++){b.pages.push({current:b.page==e?"active":"",pageNumber:e})}}}return c}}}]);angular.module("dpCommonApp").config(["$httpProvider",function(a){a.interceptors.push("pagedRequestInterceptor")}]);angular.module("dpCommonApp").component("dpErrorValidation",{template:'<div class="error-msgs" ng-messages="field.$error">				<div ng-message="required" style="color:red">{{i18n.get(\'validation.not.empty.message\')}}</div>				<div ng-message="email" style="color:red">{{i18n.get(\'validation.valid.email.message\')}}</div>				<div ng-message="number" style="color:red">{{i18n.get(\'validation.valid.number\')}}</div>				<div ng-message="min" style="color:red">{{i18n.get(\'validation.number.small\')}}</div>				<div ng-message="max" style="color:red">{{i18n.get(\'validation.number.big\')}}</div>				<div ng-message="url" style="color:red">{{i18n.get(\'validation.valid.url\')}}</div>				<div ng-message="dpStrongSecret.containsNumber" style="color:red">{{i18n.get(\'validation.password.with.number\')}}</div>				<div ng-message="dpStrongSecret.containsUppercase" style="color:red">{{i18n.get(\'validation.password.with.uppercase\')}}</div>				<div ng-message="dpStrongSecret.minLength" style="color:red">{{i18n.get(\'validation.password.length\')}}</div>				<div ng-message="dpCheckCopy" style="color:red">{{i18n.get(\'validation.repeat\')}}</div>				<div ng-message="dpSingleWorld" style="color:red">{{i18n.get(\'validation.validation.format\')}}</div>				<div ng-message="validateNumber.NAN" style="color:red">{{i18n.get(\'validation.valid.number\')}}</div>				<div ng-message="dpVerifyString" style="color:red" ng-bind-html="i18n.get(\'validation.verifyString\')"></div>				<div ng-message="youtubeUrl" style="color:red" ng-bind-html="i18n.get(\'validation.url.youtube\')"></div>				<div ng-message="vimeoUrl" style="color:red" ng-bind-html="i18n.get(\'validation.url.vimeo\')"></div>			</div>',controller:["$scope","$compile","controllerService",function(b,c,a){b.field=this.field;a.init(b)}],bindings:{field:"="}});angular.module("dpCommonApp").directive("dpCheckCopy",function(){return{restrict:"A",require:"ngModel",scope:{dpCheckCopy:"="},link:function(c,b,a,d){c.$watch(function(f){return c.dpCheckCopy.$viewValue},function(){d.$setValidity("dpCheckCopy",b[0].value==c.dpCheckCopy.$viewValue)});function e(f){d.$setValidity("dpCheckCopy",f==c.dpCheckCopy.$viewValue);return f}d.$parsers.push(e)}}});angular.module("dpCommonApp").directive("upperCase",["$parse",function(a){return{restrict:"A",require:"ngModel",link:function(f,e,b,g){var d=a(b.ngModel);var c=d.assign;function h(i){e.val(i.toUpperCase());c(f,i.toUpperCase());return i.toUpperCase()}g.$parsers.push(h)}}}]);angular.module("dpCommonApp").directive("dpVerifyString",function(){return{restrict:"A",require:"ngModel",scope:{dpVerifyString:"@"},link:function(d,c,a,e){function b(f){if(d.dpVerifyString==f){e.$setValidity("dpVerifyString",true)}else{e.$setValidity("dpVerifyString",false)}return f}e.$parsers.push(b)}}});angular.module("dpCommonApp").directive("dpStrongSecret",function(){return{restrict:"A",require:"ngModel",link:function(d,c,a,e){function b(f){if(/[A-Z]/.test(f)){e.$setValidity("dpStrongSecret.containsUppercase",true)}else{e.$setValidity("dpStrongSecret.containsUppercase",false)}if(/[0-9]/.test(f)){e.$setValidity("dpStrongSecret.containsNumber",true)}else{e.$setValidity("dpStrongSecret.containsNumber",false)}if(f.length>=8){e.$setValidity("dpStrongSecret.minLength",true)}else{e.$setValidity("dpStrongSecret.minLength",false)}return f}e.$parsers.push(b)}}});angular.module("dpCommonApp").directive("dpYoutubeUrl",function(){return{restrict:"A",require:"ngModel",link:function(d,c,a,e){function b(g){var f=/http(s)?:\/\/www\.youtube\.com\/watch\?v=[0-9a-zA-Z-_]+$/;if(f.test(g)){e.$setValidity("youtubeUrl",true)}else{e.$setValidity("youtubeUrl",false)}return g}e.$parsers.push(b)}}});angular.module("dpCommonApp").directive("dpVimeoUrl",function(){return{restrict:"A",require:"ngModel",link:function(d,c,a,e){function b(g){var f=/^http(s)?:\/\/(www\.)?vimeo\.com\/[0-9]+$/;if(f.test(g)){e.$setValidity("vimeoUrl",true)}else{e.$setValidity("vimeoUrl",false)}return g}e.$parsers.push(b)}}});angular.module("dpCommonApp").directive("validateNumber",function(){return{restrict:"A",require:"ngModel",link:function(c,b,a,d){function e(f){if(isNaN(f)){d.$setValidity("validateNumber.NAN",false)}else{d.$setValidity("validateNumber.NAN",true)}return f}d.$parsers.push(e)}}});angular.module("dpCommonApp").directive("validateRadio",function(){return{restrict:"A",require:"ngModel",link:function(c,b,a,d){function e(f){if(isNaN(f)){d.$setValidity("validateNumber.NAN",false)}else{d.$setValidity("validateNumber.NAN",true)}return f}d.$parsers.push(e)}}});angular.module("dpCommonApp").directive("dpSingleWorld",function(){return{restrict:"A",require:"ngModel",link:function(c,b,a,d){function e(f){if(/[^A-Za-z0-9\.\-_@]/.test(f)){d.$setValidity("dpSingleWorld",false)}else{d.$setValidity("dpSingleWorld",true)}return f}d.$parsers.push(e)}}});angular.module("dpCommonApp").factory("errorHttpInterceptor",["$q","$location","modalMessageService","i18n",function(a,e,c,d){var b=function(f){if(f.config){return f.config.url.startsWith("rest")}else{if(f.url){return f.url.startsWith("rest")}else{if(f.startsWith){return f.startsWith("rest")}}}return false};return{responseError:function(f){if(b(f)){if(f.status==401){$("#"+dpModalLoginId).modal({backdrop:"static",keyboard:false});return a.reject(f)}else{if(f.status==404){e.path("/404");return}else{if(f.data&&d["service.error."+f.data.code]){c.open({title:"Attenzione",text:d.get("service.error."+f.data.code)})}else{c.open({title:"Attenzione",text:"<p>Si è verificato un errore applicativo. Si suggerisce di riprovare più tardi.</p>"})}}}}return a.reject(f)}}}]);angular.module("dpCommonApp").config(["$httpProvider",function(a){a.interceptors.push("errorHttpInterceptor")}]);angular.module("dpCommonApp").factory("modalHttpInterceptor",["$q","logService",function(b,f){var d=function(g){if(g.headers.noLoading){return false}else{if(g.config){return g.config.url.startsWith("rest")}else{if(g.url){return g.url.startsWith("rest")}else{if(g.startsWith){return g.startsWith("rest")}}}return false}};var e=0;var a=function(){if(e==0){f.info("show http modal");$("#loadingModal").modal("show")}e++;f.info("new call:"+e)};var c=function(){e--;if(e==0){f.info("hide http modal"+$("#loadingModal").length);$("#loadingModal").modal("hide")}f.info("response received:"+e)};return{request:function(g){if(d(g)){a()}return g},requestError:function(g){if(d(g)){c()}return b.reject(g)},response:function(g){if(d(g)){c()}return g},responseError:function(g){if(d(g)){c()}return b.reject(g)}}}]);angular.module("dpCommonApp").config(["$httpProvider",function(a){$('<div class="modal" data-backdrop="static" id="loadingModal" data-keyboard="false" tabindex="-1" role="dialog" aria-hidden="true" style="padding-top:15%; overflow-y:visible;"> 			<div class="modal-dialog modal-m">			<div class="modal-content">				<div class="modal-header"><h3 style="margin:0;">Caricamento in corso...</h3></div>				<div class="modal-body">					<div class="progress progress-striped active" style="margin-bottom:0;"><div class="progress-bar" style="width: 100%"></div></div>				</div>			</div></div></div>').appendTo(document.body);a.interceptors.push("modalHttpInterceptor")}]);angular.module("dpCommonApp").factory("logHttpInterceptor",["$q","logService",function(a,c){var b=function(d){if(d.config){return d.config.url.startsWith("rest")}else{if(d.url){return d.url.startsWith("rest")}else{if(d.startsWith){return d.startsWith("rest")}}}return false};return{request:function(d){if(b(d)){c.debug("calling url "+d.url)}return d},requestError:function(d){if(b(d)){c.error("Request error - calling url "+d.config.url+" ["+d.status+" "+d.statusText+"]")}return a.reject(d)},response:function(d){if(b(d)){c.info("success calling url "+d.config.url);c.debug(d.data)}return d},responseError:function(d){if(b(d)){c.error("Response error - error calling url "+d.config.url+" ["+d.status+" "+d.statusText+"]")}return a.reject(d)}}}]);angular.module("dpCommonApp").config(["$httpProvider",function(a){a.interceptors.push("logHttpInterceptor")}]);angular.module("dpCommonApp").service("logService",["$log",function(a){this.info=function(b){a.info(b)};this.error=function(b){a.error(b)};this.warn=function(b){a.warn(b)};this.debug=function(b){a.debug(b)}}]);angular.module("dpCommonApp").config(["$mdDateLocaleProvider",function(a){a.formatDate=function(b){return b?moment(b).format("DD/MM/YYYY"):null}}]);var regexIso8601=/^(\d{4}|\+\d{6})(?:-(\d{2})(?:-(\d{2})(?:T(\d{2}):(\d{2}):(\d{2})\.(\d{1,})(Z|([\-+])(\d{2}):(\d{2}))?)?)?)?$/;function convertDateStringsToDates(a){if(typeof a!=="object"){return a}for(var d in a){if(!a.hasOwnProperty(d)){continue}var e=a[d];var c;if(typeof e==="string"&&(c=e.match(regexIso8601))){var b=Date.parse(e);if(!isNaN(b)){a[d]=new Date(b)}}else{if(typeof e==="object"){convertDateStringsToDates(e)}}}}angular.module("dpCommonApp").config(["$httpProvider",function(a){a.defaults.transformResponse.push(function(b){convertDateStringsToDates(b);return b})}]);angular.module("dpCommonApp").run(["$rootScope","$window",function(a,b){a.$on("$routeChangeSuccess",function(d,c,e){if(c.params.skipScroll){return}$("html, body").animate({scrollTop:0},500)})}]);